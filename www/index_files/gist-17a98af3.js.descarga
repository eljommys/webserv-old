System.register(["./chunk-frameworks.js","./chunk-vendor.js"],(function(e,t){"use strict";var s,n,o,r,c,i,a,l,u,f,d,g;return{setters:[function(e){s=e.o,n=e.aZ,o=e.B,r=e.Y,c=e.D,i=e.p,a=e.k,l=e.a$,u=e.r},function(e){f=e.a,d=e.o,g=e.r}],execute:function(){function e(e){const t=e.querySelector(".js-gist-files"),s=document.getElementById("js-gist-file-template"),n=document.createElement("div");n.innerHTML=s.textContent;for(const r of n.querySelectorAll("[id]"))"blob-dragged-file-input"!==r.id&&r.removeAttribute("id");const o=n.querySelector(".js-code-textarea");null!=o&&o.setAttribute("id","blob_contents_"+Date.now());for(const r of n.children)t.append(r);return t.lastElementChild}function j(e){return n(e.closest(".js-code-editor"))}async function m(e){const t=e.getAttribute("data-language-detection-url");if(!t)return;const s=new URL(t,window.location.origin),n=new URLSearchParams(s.search.slice(1));n.append("filename",e.value),s.search=n.toString();const o=await fetch(s.toString(),{headers:{"X-Requested-With":"XMLHttpRequest",Accept:"application/json"}});if(!o.ok){const e=new Error,t=o.statusText?" "+o.statusText:"";throw e.message=`HTTP ${o.status}${t}`,e}const r=await o.json();(await j(e)).setMode(r.language)}function h(e){const t=e.querySelectorAll(".js-remove-gist-file");for(const s of t)s.classList.toggle("d-none",t.length<2)}s(".js-gist-filename",(async e=>{const t=e,s=e.closest(".js-code-editor");await j(s),o(t,m),e.addEventListener("blur",(()=>r(t,m)),{once:!0})})),f("click",".js-add-gist-file",(function(t){t.preventDefault();e(t.currentTarget.closest(".js-blob-form")).scrollIntoView()})),f("gist:filedrop",".js-blob-form",(async function(t){const{file:s,data:n}=t.detail,o=function(t){for(const e of t.querySelectorAll(".js-gist-file")){const t=e.querySelector(".js-gist-filename"),s=e.querySelector(".js-blob-contents");if(!t.value&&!s.value)return e}return e(t)}(t.currentTarget),r=o.querySelector(".js-gist-filename");r.value=s.name,m(r);(await j(r)).setCode(n),o.scrollIntoView()})),f("click",".js-remove-gist-file",(function(e){e.preventDefault();const t=e.currentTarget.closest(".js-gist-file");for(const s of t.querySelectorAll(".js-gist-deleted input"))s.disabled=!1;t.querySelector(".js-code-editor").remove()})),d(".js-remove-gist-file",(function(e){const t=e.closest(".js-gist-files");return{add(){h(t)},remove(){h(t)}}})),s(".js-quicksearch-field",(function(e){a(e.form.querySelector(".js-quicksearch-results"))})),c(".js-quicksearch-field",(async function(e){const t=e.target,s=t.value.replace(/^\s+|\s+$/g,""),n=t.closest("form"),o=n.querySelector(".js-quicksearch-results"),r=o.getAttribute("data-quicksearch-url");let c="";null==y||y.abort();const{signal:i}=y=new AbortController;if(s.length){const e=new URL(r,window.location.origin),t=new URLSearchParams(e.search.slice(1));t.append("q",s),e.search=t.toString(),n.classList.add("is-sending");try{const t=await fetch(e.toString(),{signal:i});t.ok&&(c=await t.text())}catch(a){}}if(i.aborted)return;c&&(o.innerHTML=c);o.classList.toggle("active",""!==s),n.classList.remove("is-sending")})),f("navigation:keydown",".js-quicksearch-results",(function(e){const t=e,s=t.target,n=s.closest("form");if("Escape"===t.detail.hotkey){const e=n.querySelector(".js-quicksearch-results");e.classList.remove("active"),l(e)}else"Enter"!==t.detail.hotkey||s.classList.contains("js-navigation-item")||(u(n),t.preventDefault())})),f("submit",".js-quicksearch-form",(function(e){const t=e.currentTarget.querySelector(".js-quicksearch-results");t&&(t.classList.remove("active"),i(t))})),f("focusout:delay",".js-quicksearch-field",(function(e){const t=e.currentTarget.closest("form").querySelector(".js-quicksearch-results");t&&(t.classList.remove("active"),i(t))}));let y=null;g(".js-gist-file-update-container .js-comment-update",(async function(e,t){let s;try{s=await t.json()}catch(n){return}if(e.action=s.json.url,s.json.authenticity_token){e.querySelector("input[name=authenticity_token]").value=s.json.authenticity_token}})),d(".js-gist-dropzone",(()=>{t.import("./chunk-drag-drop.js")}))}}}));
//# sourceMappingURL=gist-0b01557d.js.map
